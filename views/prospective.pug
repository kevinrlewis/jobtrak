extends layout


block content
  include userscripts.pug
  include navigationbar.pug
  div.box-cont.container-fluid#prospective
    div.row
      h3(class='col-xs-12 col-sm-6 col-md-6' style='margin-top:2px;')=("prospective jobs: " + prospectivesum)
      button(
        class='btn btn-default col-xs-6 offset-sm-2 col-sm-4 offset-md-2 col-md-4'
        id="addJobBtn"
        onclick="addprospect_click()"
      ) add a prospect
      
    div.row.hide#addprospectarea
      div.container
        div.row(id='messageAlert' class='alert alert-danger' style="display: none; font: 13px arial, sans-serif;")
          label.col-xs-12 job already exists.
        div.row.justify-content-center
          input.form-control(
            id="pcompanyTextField"
            type="plaintext"
            placeholder="company"
            class="col-xs-12 col-sm-7"
          )
        div.row.justify-content-center
          input.form-control(
            id="ptitleTextField"
            type="plaintext"
            placeholder="job title"
            class="col-xs-12 col-sm-7"
          )
        div.row.justify-content-center      
          input.form-control(
            id="plinkTextField"
            type="plaintext"
            placeholder="link"
            class="col-xs-12 col-sm-7"
          )
        div.row.justify-content-center
          input.form-control(
            id="pjobCommentField"
            type="plaintext"
            placeholder="comments or identifiers"
            class="col-xs-12 col-sm-7"
          )
        div.row.justify-content-center
          button.submit-btn(
            id="psubmitJobBtn"
            class="btn btn-success col-12 col-sm-7"
            onclick="addJob()"
          ) submit

    if user.jobs == undefined
      label error retrieving jobs
    else
      each item, index in user.prospectjobs
        div.row(class="job-box")
          h4(class="col-2 col-sm-1 col-md-1" type="text" name="index")=(index+1)
          label(class="col-2 col-sm-2 col-md-1")=item.date
          label(class="col-8 col-sm-9 col-md-3")
            if item.company == undefined
              a.btn(href=item.website)=item.hostname
            else
              a.btn(href=item.website)=item.company
          label(class='col-3 col-sm-3 col-md-2')
            a.btn(id='commentlink' onclick='prospectcomments_click(' + index + ')') comments
          div.d-flex.p-2.col-6.col-sm-6.col-md-5.justify-content-end
            form(action="/move?prospect="+index method="POST")
              button(
                type='submit'
                class="btn btn-success move"
                aria-hidden="true"
                style="float: left; padding-left: 5px; padding-right: 5px;"
              ) applied
            form(action="/remove?prospect="+index method="POST")
              input(
                type='submit'
                class="btn btn-danger rmv"
                aria-hidden="true"
                value="remove"
                style="float: right; padding-left: 5px; padding-right: 5px;"
              )
          div.comment-area.hide(id='prospectcomment'+index style='padding: 0!important;')
            h8=item.comments
