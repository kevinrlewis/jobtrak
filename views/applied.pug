extends layout

block content
  include userscripts.pug
  include navigationbar.pug
  script(src='/scripts/activetab.js')
  div.box-cont.container-fluid#jobsapplied
    div.row
      h3.txt-white.col-xs-12.col-sm-6.col-md-6(style='margin-top:2px;')=("Jobs applied: " + appliedsum)   
      button.btn.btn-default.col-xs-6.offset-sm-2.col-sm-4.offset-md-2.col-md-4(
        id="addJobBtn"
        onclick="addjob_click()"
      ) add a job
    div.row.hide#addjobarea
      div.container-fluid
        div.alert.alert-danger.row(id='messageAlert' style="display: none; font: 13px arial, sans-serif;")
          label.col-xs-12 job already exists.
        div.row.justify-content-center
          input.col-xs-12.col-sm-7.form-control(
            id="companyTextField"
            type="plaintext"
            placeholder="company"
          )
        div.row.justify-content-center
          input.col-xs-12.col-sm-7.form-control(
            id="titleTextField"
            type="plaintext"
            placeholder="job title"
          )
        div.row.justify-content-center
          input.col-xs-12.col-sm-7.form-control(
            id="linkTextField"
            type="plaintext"
            placeholder="link"
          )
        div.row.justify-content-center
          input.col-xs-12.col-sm-7.form-control(
            id="jobCommentField"
            type="plaintext"
            placeholder="comments or identifiers"
          )
        div.row.justify-content-center
          button.btn.btn-success.col-xs-12.col-sm-7.submit-btn(
            id="submitJobBtn"
            onclick="addJob()"
          ) submit
    
    if user.jobs == undefined
      label error retrieving jobs
    else
      each item, index in user.jobs
        div.row(class="job-box")
          h5.col-7()
            a(href=item.website style="padding-left: 0;")=item.company
            small(style="font-size: 60%;")
              a#commentlink(onclick='comments_click(' + index + ')' style="padding-left: 0;")=" comments"
          h5.col-5(
            style='margin-bottom: 0; text-align: end; padding-right: 0;')=item.date
          h5.col-12.col-sm-4.col-md-5()=item.jobtitle
          div.col-12.col-sm-8.col-md-7#job-buttondiv(style="padding: 0!important;")
            form(action="/move?inter="+index method="POST" style="float: right;")
              input.btn.btn-success.move(
                type='submit'
                value='interviewing'
                style="margin-right: 0;"
              )
            form(action="/move?reject="+index method="POST" style="float: right;")
              button.btn.btn-success.reject(
                type='submit'
                aria-hidden="true"
                style="margin-right: 0.5rem;"
              ) rejected
            button.btn.btn-danger.rmv(
              style="float: right; margin-right: 0.5rem;"
              onclick="showRemoveOptions(" + 2 + ", " + index + ")"
            ) remove
          div.hide(id="doubleCheck" + index 
              style="width: 100%; text-align: right; padding: 0; margin-top: 0.25rem;")
            h7(style="margin: 0.25rem;") Are you sure?
            button#yes.btn.btn-success(
              style="margin-left: 0.25rem;"
              onclick="removeJob(" + 2 + ", " + index + ")"
            ) Yes
            button#no.btn(
              style="margin-left: 0.25rem;"
              onclick="showRemoveOptions(" + 2 + ", " + index + ")"
            ) No
          div.comment-area.hide(id='comment'+index style='padding: 0!important;')
            h8=item.comments            
