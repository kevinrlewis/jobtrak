extends layout


block content
  include modal.pug
  div.container#header(style='margin-bottom:10px;')
    div.row
      h1(class='col-xs-8 col-sm-6' style='margin-top:0px;')='hello '+user.local.username
      form(method='GET')
        input(
          class='btn btn-danger col-xs-offset-1 col-sm-offset-4 col-md-offset-5 col-xs-3 col-sm-2 col-md-1'
          value='logout'
          type='submit'
          formaction='/logout'
        )
  hr
  div.container
    if message
      div.row(id='existsAlert' class='alert alert-danger') Job already exists.
    div.row
      h3(class='col-xs-4 col-sm-4 col-md-4' style='margin-top:2px;') jobs applied:
      button(
        class='btn btn-default col-xs-offset-4 col-xs-4 col-sm-4 col-md-4'
        id="addJobBtn"
        onclick="addjob_click()"
      ) add a job
      div.row(id='popupModal' class='modal')
        div.modal-content.container
          div.row
            h3(style="float: left; margin: 0px;") Add Job
            span(class="close" onclick="modalclose_click()") x
          form(action="/add" method="POST")
            div.row(id="addJobForm")
              label.col-xs-4.col-sm-2 Job Link:
              input(
                id="linkTextField"
                type="plaintext"
                placeholder="Link"
                class="col-xs-8 col-xs-10"
                name="job_link"
              )
            div.row
              input(
                class="btn btn-success col-xs-offset-5 col-xs-3 col-sm-2"
                type="submit"
                value="submit"
              )

    if user.jobs == undefined
      label error retrieving jobs
    else
      each item, index in user.jobs
        div.row(class="job-box")
          label(class="col-xs-1" type="text" name="index")=(index+1)
          label(class="col-xs-8")=item.website
          label(class="col-xs-1")=item.date
          form(action="/remove?index="+index method="POST")
            input(
              type='submit'
              class="btn btn-danger rmv col-xs-offset-1 col-xs-1"
              aria-hidden="true"
              value="remove"
            )
